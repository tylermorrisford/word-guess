<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
    <!-- <link rel="stylesheet" href="style.css"> -->
    <title>Word Guess Game</title>
    <style>
        body {
            background-image: url("assets/sarlacc-pit.jpg");
            background-size: cover;
            background-color: rgb(51, 51, 51);
        }
        h1 h2 h3 p {
            font-size: 1.5rem;
        }
        .wrapper {
            background-color: white;
            border: 1px solid black;
            border-radius: 3%;
            opacity: 0.8;
            color: black;
            width: 50%;
            height: 60%;
            margin: auto;
            text-align: center;
            font-family: 'Open Sans', sans-serif;
        }
    </style>
</head>

<body>
    <!-- word guess html elements -->
    <div class="wrapper">
        <h1>Star Wars Word Guess</h1>
        <h2>your word is:</h2>
        <div id="theWord">your word is:</div>
        <h4>Letters you've guessed:</h4>
        <div id="yourGuesses">_</div>
        <h4>Guesses left: <span id="chancesLeft">?</span></h4>
        <h4>wins: <span id="winNumber">0</span></h4>

    </div>


    <script>
        // ARRAYS AND VARIABLES --------------------------------------------|||||||||
        // create an array with words that users must guess - If you say "and" you probably need to write a new statement on a new line!
        let levelOne = [
            "stormtrooper",
            "leia",
            "wookiee",
            "alderaan",
            "lightsaber",
            "tatooine",
            "vader",
            "skywalker",
            "kenobi",
            "jabba",
            "carbonite"];
        let word = levelOne[Math.floor(Math.random() * levelOne.length)];
        let theWord = document.getElementById("theWord");
        let currentWord = [];
        let userEntry = document.getElementById("yourGuesses");
        let guessesList = [];
        let chances = document.getElementById("chancesLeft");
        var g = (word.length + 6);
        let winNum = document.getElementById("winNumber");
        let wins = 0;
        // use word.length to display the number of underscores as blank spots
        for (i = 0; i < word.length; i++) {
            currentWord[i] = "_";
        } theWord.textContent = currentWord.join(" ");
        // capture key that user presses as their guess |||  BEGINS GAME LOOP  ||| (for better or worse)
        document.onkeydown = function (event) {
            var userChoice = event.key.toLowerCase();
            // log users guess on the page, and add it to the array guessesList
            guessesList.push(userChoice);
            userEntry.textContent = guessesList;
            // decrement the remaining guesses
            g--;
            chances.textContent = g;
            // check users guess against the current array index:
            // if users guess exists in the object,
            if (word.includes(userChoice)) {
                //  replace underscore with that letter            
                for (j = 0; j < word.length; j++) {
                    // if the user's choice is equal to an index of the random word
                    if (userChoice === word[j]) {
                        // then match the index of the hidden word to the the index of the random word 
                        currentWord[j] = word[j];
                    }
                    // the array of spaces will add user's chosen letter into the index of the hidden word
                    theWord.textContent = currentWord.join(" ");
                    console.log(word);
                }
                // if users guess does not exist in the string, console.log an error message as many times as word.length
            } else {
                console.log(userChoice + " does not appear in the word.");
            }
            // if user runs out of chances
            if (g === 0 && word !== currentWord.join("")) {
                alert("GAME OVER, YOU REBEL SCUM! Refresh the page to try again.");
                wins--;
                winNum.textContent = wins;
                // if user guesses all letters before running out of guesses, increment wins #, show congratulations alert,
            } else if (word === currentWord.join("") && g > 0) {       
                // increment number of wins
                wins++;
                winNum.textContent = wins;
                confirm("Great job kid, that shot was one in a million!");
                // and move to the next word - re-initialize the game with a function? NEED SOME GUIDANCE ON THIS OPERATION
            }
        }
    </script>

</body>

</html>